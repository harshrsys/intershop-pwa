<div *ngIf="budget">
  <dl>
    <dt>{{ 'account.user.new.order_spend_limit.label' | translate }}</dt>
    <dd *ngIf="budget.orderSpentLimit; else noBudget">{{ budget.orderSpentLimit | ishPrice }}</dd>
    <ng-template #noBudget>
      <dd>{{ 'approval.details.threshold.unlimited' | translate }}</dd>
      <dl>
        <dd>
          {{ 'account.budget.common.undefined' | translate }}
        </dd>
      </dl>
    </ng-template>
  </dl>
  <dl *ngIf="budget.budget">
    <dt>{{ 'account.budget.common.per_type' | translate: { '0': budget.budgetPeriod } }}</dt>
    <dd>{{ budget.budget | ishPrice }}</dd>
    <dd>
      <div [ngbPopover]="BudgetPopover" placement="top" data-testing-id="user-budget-popover">
        <div class="progress">
          <div class="progress-bar" role="progressbar" [ngStyle]="{ width: usedBudgetPercentage | percent }">
            <span class="progress-display">{{ usedBudgetPercentage | percent }}</span>
            <ng-template #BudgetPopover>
              <div class="row col-md-12">
                <div class="col-md-6">
                  <label>{{ 'orders.widget.' + budget.budgetPeriod + '_spend_limit.label' | translate }}</label>
                </div>
                <div class="col-md-6 text-right">{{ budget.budget | ishPrice }}</div>
              </div>
              <div class="row col-md-12">
                <div class="col-md-6">
                  <label>{{ 'account.user.list.spent.label' | translate }}</label>
                </div>
                <div class="col-md-6 text-right">{{ usedBudget.value }} ({{ usedBudgetPercentage | percent }})</div>
              </div>
              <div class="row col-md-12">
                <div class="col-md-6">
                  <label>{{ 'account.user.list.left.label' | translate }}</label>
                </div>
                <div class="col-md-6 text-right">
                  {{ budget.remainingBudget | ishPrice }} ({{ remainingBudgetPercentage | percent }})
                </div>
              </div>
            </ng-template>
          </div>
        </div>
      </div>
    </dd>
  </dl>
</div>
